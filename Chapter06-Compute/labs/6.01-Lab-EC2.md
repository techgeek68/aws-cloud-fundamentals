# Lab 3: Introduction to Amazon EC2

EC2 stands for Amazon Elastic Compute Cloud, which is a web service that provides resizable virtual servers, or "instances," in the cloud. It allows users to rent computing power from Amazon's data centers to run applications without needing to own physical hardware. Key benefits include scalability, a pay-as-you-go pricing model, and flexibility to choose specific CPU, memory, and storage resources for a given workload.  

---

## Lab Overview and Objectives

In this lab, I practice launching, resizing, managing, and monitoring an Amazon EC2 instance.

Key ideas:
- I can launch servers (instances) in minutes and scale up or down.
- I pay only for what I actually use.
- I keep full control over the OS, storage, networking, and security.
- EC2 helps me build resilient applications that can handle failures.

---

**Architectural Diagram**

```
+---------------------------- AWS Account -----------------------------------+
| Region: us-east-1                                                          |
|                                                                            |
|  +------------------- Lab VPC --------------------+                        |
|  |                                                |                        |
|  |  +----------    Subnet1    -----------+        |  +----------------+    |
|  |  |  EC2 Instance: Web Server          |        |  |    Subnet2     |    |
|  |  |  - AMI: Amazon Linux 2023          |        |  |                |    |
|  |  |  - Type: t2.micro -> t2.small      |        |  +----------------+    |
|  |  |  - Termination protection: ON      |        |                        |
|  |  |  - Stop protection: ON then OFF    |        |                        |
|  |  |  - User Data: install Apache       |        |                        |
|  |  |  - Root Volume: 8 GiB -> 10 GiB    |        |                        |
|  |  +------------------------------------+        |                        |
|  |                |                               |                        |
|  |                v                               |                        |
|  |  +---------------- Security Group -----------+ |                        |
|  |  | - Initial: No inbound rules               | |                        |
|  |  | - Updated: Allow HTTP (80) from 0.0.0.0/0 | |                        |
|  |  +-------------------------------------------+ |                        |
|  +------------------------------------------------+                        |
|                |                                                           |
|                v                                                           |
|         [User Browser: HTTP]                                               |
|                |                                                           |
|                v                                                           |
|         (Accesses EC2 public IP/DNS)                                       |
|                                                                            |
|     [AWS Console: API calls for launch/modify/stop]                        |
|                                                                            |
+----------------------------------------------------------------------------+
|                                                                            |
|      [CloudWatch: Metrics, Logs, Screenshot]                               |
|      [Service Quotas: EC2 limits]                                          |
+----------------------------------------------------------------------------+
```

---

**Task 1: Launch My Amazon EC2 Instance**

Goal: Launch an Amazon EC2 instance with termination protection and stop protection, and use a User Data script to set up a simple web server.

**Step 1: Open the EC2 Console**
- In the AWS Management Console, I choose Services → Compute → EC2.
- I confirm the region is N. Virginia (us-east-1). If not, I switch to it.

**Step 2: Start the Launch Wizard**
- I choose Launch instance → Launch instance.

**Step 3: Name and Tags**
- I set the instance name to: Web Server.
- This creates a tag with Key: Name and Value: Web Server.
- Tags help me organize resources (e.g., by purpose, owner, or environment).

**Step 4: Application and OS Image (AMI)**
- I keep the default Amazon Linux entry (Amazon Linux 2023).
- An AMI includes:
  - A template for the root volume (OS and optional software).
  - Launch permissions (who can use it).
  - Block device mappings (attached volumes).

**Step 5: Instance Type**
- I keep the default type: t2.micro (1 vCPU, 1 GiB memory).
- Instance types offer different mixes of CPU, memory, storage, and networking.

**Step 6: Key Pair (for SSH Login)**
- For the Key pair name, I chose: 'Create new key pair'
  - Key pair type: RSA
  - Private key format: .pem
- EC2 uses public–key cryptography for secure access.

**Step 7: Network Settings**
- I click Edit next to Network settings.
- VPC: I select 'default' VPC. (Not Edited)
  - Subnet: I chose the subnet associated with the 'default' VPC
  <img width="475" height="305" alt="Screenshot 2025-11-06 at 9 24 28 AM" src="https://github.com/user-attachments/assets/35ae1d5b-7307-439d-a8fa-83b40eb3f59f" />

- Firewall (Security groups):
  - I choose Create security group.
  - Security group name: 'Web Security Group'
  - Description: Security group for my web server
  - I removed the default inbound rule, so there are no inbound rules at this time.
  - (A security group works like a virtual firewall for my instance.)

**Step 8: Configure Storage**
- I keep the default root volume: 8 GiB EBS.
- This is the root (boot) volume for the instance.

**Step 9: Advanced Details**
- I expand the Advanced details.
- Termination protection: I select Enable (prevents accidental termination).
- User data: I paste the following script:

```bash
#!/bin/bash
# Student: <Full_Name>
# Lab 3 EC2

# Install Apache web server
sudo dnf install -y httpd                         # Use sudo to ensure sufficient privileges

# Enable and start Apache service
sudo systemctl enable httpd                       # Enable Apache to start on boot
sudo systemctl start httpd                        # Start the Apache web server

# Create a simple index page
echo '<h1>Hello from my web server, hosted on the AWS cloud!</h1>' | sudo tee /var/www/html/index.html > /dev/null
```

**Step 10: Launch the Instance**
- I scroll to the bottom and choose Launch instance.
- I see a success message.  


**Step 11: View the Instance**
- I choose View all instances.
- I select the instance named Web Server.
- In the Details tab, I review:
  - Instance type
  - Network settings
  - Security group
  - Public IPv4 DNS (for Internet access)
- Initial states:
  - Pending → Initializing → Running.

**Step 12: Wait for Health**
- I wait until:
  - Instance state: Running
  - Status checks: 2/2 checks passed


**Test Access**
- I open a new browser tab, paste the IP, and press Enter.
- Question: Can I access the web page?  
  Answer: No. The security group currently blocks inbound port 80 (HTTP). This shows how security groups act as firewalls.


---


**Task 2: Monitor My Instance**

Goal: Use built-in monitoring features (status checks, logs, metrics, console output).

**Step 1: Status Checks**
- I select the instance and open the Status checks tab.
- Both System reachability and Instance reachability tests have passed.

**Step 2: Monitoring (CloudWatch Metrics)**
- I open the Monitoring tab.
- I see basic metrics (a few at first since it was just launched).
- I can enlarge any graph via the three dots menu.
- Basic (5-minute) monitoring is enabled by default; detailed (1-minute) is optional.

**Step 3: View System Log**
- I choose Actions → Monitor and troubleshoot → Get system log.
- I review the console output (useful for debugging boot issues).
- I confirm the HTTP package installed via user data.
- I choose Cancel to close.

<img width="1410" height="593" alt="Screenshot 2025-11-06 at 9 38 05 AM" src="https://github.com/user-attachments/assets/7def7047-aa22-4241-a964-21ebe46bef89" />

**Step 4: View Instance Screenshot**
- With Web Server still selected:
  - Actions → Monitor and troubleshoot → Get instance screenshot.
- I view the virtual console screenshot (useful if SSH/RDP fails).
- I choose Cancel.

<img width="1418" height="464" alt="Screenshot 2025-11-06 at 9 38 53 AM" src="https://github.com/user-attachments/assets/525db98a-471e-456f-815c-0e809af3b356" />


---


**Task 3: Update Security Group and Access the Web Server**

Goal: Allow HTTP traffic and view the web page created by user data.

**Step 1: Get Public IP**
- I select the Web Server instance and copy its Public IPv4 address from the Details tab.

**Step 2: Open Security Groups**
- I return to the EC2 console tab.
- In the left navigation pane, I choose Security Groups.
- I select the Web Server security group.

**Step 4: Add Inbound Rule**
- I open the Inbound rules tab (currently empty).
- I choose Edit inbound rules → Add rule:
  - Type: HTTP
  - Source: Anywhere-IPv4
- I choose Save rules.

**Step 5: Refresh Web Page**
- I go back to the browser tab with the instance IP and refresh.
- I now see: 

<img width="1468" height="414" alt="Screenshot 2025-11-06 at 9 35 07 AM" src="https://github.com/user-attachments/assets/23c39027-d067-46d9-964d-4177c5f71e30" />


---

**Task 4: Resize My Instance (Instance Type and EBS Volume)**

Goal: Stop the instance, change the instance type (scale up), and increase the disk size.

**Part A: Stop the Instance**
1. In EC2 → Instances, I select Web Server.
2. Instance state → Stop instance.
3. I confirm by choosing Stop.
4. I wait until the state shows Stopped.

> Note: While stopped, I am not billed for compute time, but I still pay for EBS storage.

**Part B: Change Instance Type**
1. With instance selected:
   - Actions → Instance settings → Change instance type.
2. Instance type: t2.small  (t2.small has twice the memory of t2.micro.)
3. I choose Apply.
   
<img width="1466" height="691" alt="Screenshot 2025-11-06 at 9 43 51 AM" src="https://github.com/user-attachments/assets/bb5021ad-042b-4231-9e34-676b8ef09089" />

**Part C: Enable Stop Protection**
1. Actions → Instance settings → Change stop protection.
2. I select Enable.
3. I choose Save.

> Note: Stop protection blocks accidental stopping via the API or console.

**Part D: Resize the EBS Volume**
1. With instance still selected:
   - Storage tab → Click the Volume ID link.
2. On the volume list, I check the volume.
3. Actions → Modify volume.
4. I changed the size from 8 to 10 GiB (larger sizes may be restricted).
5. I choose Modify → Modify again to confirm.

<img width="1470" height="414" alt="Screenshot 2025-11-06 at 9 46 55 AM" src="https://github.com/user-attachments/assets/5f2659dc-d6cb-4395-a31b-972f9ad4e5ee" />


**Part E: Start the Instance**
1. Return to Instances.
2. Select Web Server.
3. Instance state → Start instance.


---

**Task 5: Explore EC2 Limits (Service Quotas)**

Goal: View EC2 service quotas for the region.

Steps
1. In the AWS console search bar, I type Service Quotas and open it.
2. In AWS services, I search for EC2 and select Amazon Elastic Compute Cloud (Amazon EC2).
3. In Find quota, I type running on-demand (do not select—just filter).
4. I observe limits, for instance, families (e.g., Running On-Demand Standard...).
5. If I owned the AWS account, I could request quota increases where allowed.

<img width="1470" height="744" alt="Screenshot 2025-11-06 at 9 51 54 AM" src="https://github.com/user-attachments/assets/b4df26c9-7b24-47d1-a7f4-47a35590d936" />

---

## Task 6: Test Stop Protection

Goal: Attempt to stop the instance while stop protection is enabled, then disable protection and stop it.

**Step 1: Navigate Back to EC2**
- I search for EC2 in the console and open it.

**Step 2: Attempt to Stop**
- Instances → Select Web Server.
- Instance state → Stop instance → Stop.
- I receive an error similar to:

<img width="1469" height="499" alt="Screenshot 2025-11-06 at 9 53 01 AM" src="https://github.com/user-attachments/assets/4789aa90-6f6a-4763-88e1-90f9e5632375" />


**Step 3: Disable Stop Protection**
- Actions → Instance settings → Change stop protection.
- I uncheck Enable.
- I choose Save.

**Step 4: Stop the Instance**
- With Web Server selected again:
  - Instance state → Stop instance → Stop.

<img width="1470" height="501" alt="Screenshot 2025-11-06 at 9 54 02 AM" src="https://github.com/user-attachments/assets/085762f8-d0a2-42cf-87e3-7bd6ffb45918" />

---

